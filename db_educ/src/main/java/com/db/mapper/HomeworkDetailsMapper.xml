<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.db.service.HomeworkDetailsService">
	<resultMap id="HomeworkDetailsMap" type="com.db.entity.HomeworkDetails">
		<result column="hd_id" property="hdId" jdbcType="INTEGER" />
		<result column="question_id" property="questionId" jdbcType="INTEGER" />
		<result column="question_type" property="questionType"
			jdbcType="INTEGER" />
		<result column="paper_id" property="paperId" jdbcType="INTEGER" />
		<result column="value" property="value" jdbcType="DOUBLE" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
		<result column="subject_id" property="subjectId" />
		
		<association property="questionSingleChoice" javaType="com.db.entity.QuestionSingleChoice">
			<id column="choice_id" property="choiceId" />
			<result column="choice_desc" property="choiceDesc" />
			<result column="choice_optionA" property="OptionA" />
			<result column="choice_optionB" property="OptionB" />
			<result column="choice_optionC" property="OptionC" />
			<result column="choice_optionD" property="OptionD" />
			<result column="choice_answer" property="answer" />
			<result column="choice_answer_desc" property="answerDesc" />
			<result column="subject" property="subject" />
			<result column="knowledge" property="knowledge" />
			<result column="knowledge_begin" property="knowledgeBegin" />
			<result column="knowledge_end" property="knowledgeEnd" />
			<result column="question_degree" property="degree" />
			<result column="question_type" property="type" />
			<result column="question_source" property="source" />
			<result column="question_score" property="score" />
			<result column="tag_id" property="tag" />
			<result column="teacher_id" property="teacherId" />
			<result column="used_count" property="useCount" />
			<result column="right_count" property="rightCount" />
			<result column="fault_count" property="faultCount" />
			<result column="ispublic" property="ispublic" />
		</association>
		<association property="questionMulitChoice" javaType="com.db.entity.QuestionMulitChoice">
			<id column="choice_id" property="choiceId" jdbcType="INTEGER" />
			<result column="choice_desc" property="choiceDesc1" jdbcType="VARCHAR" />
			<result column="choice_optionA" property="OptionA1" jdbcType="VARCHAR" />
			<result column="choice_optionB" property="OptionB1" jdbcType="VARCHAR" />
			<result column="choice_optionC" property="OptionC1" jdbcType="VARCHAR" />
			<result column="choice_optionD" property="OptionD1" jdbcType="VARCHAR" />
			<result column="choice_answer" property="answer1" jdbcType="VARCHAR" />
			<result column="choice_answer_desc" property="answerDesc1"
				jdbcType="VARCHAR" />
			<result column="subject" property="subject" jdbcType="INTEGER" />
			<result column="knowledge" property="knowledge" jdbcType="INTEGER" />
			<result column="knowledge_begin" property="knowledgeBegin"
				jdbcType="VARCHAR" />
			<result column="knowledge_end" property="knowledgeEnd"
				jdbcType="VARCHAR" />
			<result column="question_degree" property="degree1" jdbcType="INTEGER" />
			<result column="question_type" property="type" jdbcType="INTEGER" />
			<result column="question_source" property="source1" jdbcType="INTEGER" />
			<result column="question_score" property="score1" jdbcType="FLOAT" />
			<result column="tag_id" property="tag1" jdbcType="VARCHAR" />
			<result column="teacher_id" property="teacherId" jdbcType="INTEGER" />
			<result column="used_count" property="useCount" jdbcType="INTEGER" />
			<result column="right_count" property="rightCount" jdbcType="INTEGER" />
			<result column="fault_count" property="faultCount" jdbcType="INTEGER" />
			<result column="ispublic" property="ispublic1" jdbcType="INTEGER" />
		</association>
		<association property="questionJudge" javaType="com.db.entity.QuestionJudge">
			<id column="judge_id" property="judgeId" jdbcType="INTEGER" />
			<result column="judge_desc" property="judgeDesc" jdbcType="VARCHAR" />
			<result column="judge_answer" property="answer2" jdbcType="INTEGER" />
			<result column="judge_answer_desc" property="answerDesc2"
				jdbcType="VARCHAR" />
			<result column="subject" property="subject" jdbcType="INTEGER" />
			<result column="knowledge" property="knowledge" jdbcType="INTEGER" />
			<result column="knowledge_begin" property="knowledgeBegin"
				jdbcType="VARCHAR" />
			<result column="knowledge_end" property="knowledgeEnd"
				jdbcType="VARCHAR" />
			<result column="question_degree" property="degree2" jdbcType="INTEGER" />
			<result column="question_type" property="type" jdbcType="INTEGER" />
			<result column="question_source" property="source2" jdbcType="INTEGER" />
			<result column="question_score" property="score2" jdbcType="FLOAT" />
			<result column="tag_id" property="tag2" jdbcType="VARCHAR" />
			<result column="teacher_id" property="teacherId" jdbcType="INTEGER" />
			<result column="used_count" property="useCount" jdbcType="INTEGER" />
			<result column="right_count" property="rightCount" jdbcType="INTEGER" />
			<result column="fault_count" property="faultCount" jdbcType="INTEGER" />
			<result column="ispublic" property="ispublic2" jdbcType="INTEGER" />
		</association>
		<association property="questionRead" javaType="com.db.entity.QuestionRead">
			<id column="read_id" property="readId" jdbcType="INTEGER" />
			<result column="read_desc" property="readDesc" jdbcType="VARCHAR" />
			<result column="read_optiontitle" property="Optiontitle"
				jdbcType="VARCHAR" />
			<result column="read_optionA" property="OptionA_read"
				jdbcType="VARCHAR" />
			<result column="read_optionB" property="OptionB_read"
				jdbcType="VARCHAR" />
			<result column="read_optionC" property="OptionC_read"
				jdbcType="VARCHAR" />
			<result column="read_optionD" property="OptionD_read"
				jdbcType="VARCHAR" />
			<result column="read_answer" property="answer_read" jdbcType="VARCHAR" />
			<result column="read_answer_desc" property="answerDesc_read"
				jdbcType="VARCHAR" />
			<result column="parent_id" property="parentId" jdbcType="INTEGER" />
			<result column="subject" property="subject" jdbcType="INTEGER" />
			<result column="knowledge" property="knowledge" jdbcType="INTEGER" />
			<result column="knowledge_begin" property="knowledgeBegin"
				jdbcType="VARCHAR" />
			<result column="knowledge_end" property="knowledgeEnd"
				jdbcType="VARCHAR" />
			<result column="question_degree" property="degree_read"
				jdbcType="INTEGER" />
			<result column="question_type" property="type" jdbcType="INTEGER" />
			<result column="question_source" property="source_read"
				jdbcType="INTEGER" />
			<result column="question_score" property="score_read"
				jdbcType="FLOAT" />
			<result column="tag_id" property="tag_read" jdbcType="VARCHAR" />
			<result column="teacher_id" property="teacherId" jdbcType="INTEGER" />
			<result column="used_count" property="useCount" jdbcType="INTEGER" />
			<result column="right_count" property="rightCount" jdbcType="INTEGER" />
			<result column="fault_count" property="faultCount" jdbcType="INTEGER" />
			<result column="ispublic" property="ispublic_read" jdbcType="INTEGER" />
		</association>
	</resultMap>

	<select id="getHomeworkDetailsById" resultMap="HomeworkDetailsMap">
		select * from td_homework_details where paper_id=#{0} and question_id=#{1}
	</select>
	<select id="getTotalByPaperId" resultType="int">
	  select count(*) from td_homework_details where paper_id=#{paperId}
	</select>
	<insert id="savehomeworkDetails" parameterType="com.db.entity.HomeworkDetails"
		useGeneratedKeys="true" keyProperty="hdId">
		insert into td_homework_details
		(question_id,question_type,paper_id,create_time,value)
		values(#{questionId},#{questionType},#{paperId},#{createTime},#{value})
	</insert>
	
	<select id="getHomDateilsPaperId" resultType="java.lang.Integer">
	   select count(*) from td_homework_details where paper_id=#{paperId}
	</select>
	<select id="findHomHaIdList" resultMap="HomeworkDetailsMap">
	  select * from td_homework_details where paper_id=#{paperId} limit #{pageNo},#{pageSize}
	</select>
	<select id="getHkIdById" resultMap="HomeworkDetailsMap">
	  select * from td_homework_details where hd_id=#{hdId}
	</select>
	<delete id="deleteTimu" parameterType="java.lang.Integer">
	   delete from td_homework_details where hd_id=#{hdId}
	</delete>
	<select id="findHomeworkDetailsById" resultMap="HomeworkDetailsMap">
	select * from
		td_homework_details where paper_id=#{0} and question_id=#{1} and question_type=#{2}
	</select>
	<select id="findHomeworkPaperList" resultMap="HomeworkDetailsMap">
	 select * from td_homework_details where paper_id=#{paperId}
	</select>
</mapper>