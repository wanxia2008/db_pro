function getIframe(t,e){if(t="/Homes/home"===t?"/Homes/home":e?t:$.md5(t),e){if(!$("#"+t)[0])return null;var i=$("#"+t)[0].contentWindow}else{if(!$("#frame"+t)[0])return null;var i=$("#frame"+t)[0].contentWindow}var n=$(i.document);return{win:i,doc:n}}function addMenus(t){var e=$(t).parents(".menu_list").siblings(".menu_list_on"),i=e.find(".menu").length,n=e.find(".total_num"),a=$("#cur"),s=$("#total"),o=s.html()-0,r='<div class="menu" data-href="{data}"><span>{content}</span><i onclick="deleMenu(this);"></i></div>';if(!(i>=o||$(t).hasClass("on"))){$(t).addClass("on");var l=r.replace(/{data}/g,$(t).attr("data-href"));l=l.replace(/{content}/g,$(t).html()),n.before(l),i=e.find(".menu").length,a.html(i)}}function menuOver(t){var e=$(t).parents(".menu_list").siblings(".menu_list_on"),i=e.find(".menu").length,n=$("#total"),a=n.html()-0,s="<div class='tip_num'>至多"+a+"个，请清除不常用的菜单</div>";i>=a&&(0!=$(".tip_num").length||$(t).hasClass("on")||($(t).css("position","relative"),$(t).append(s)))}function menuOut(t){$(t).find(".tip_num").length>0&&($(t).css("position","static"),$(t).find(".tip_num").remove())}function deleMenu(t){var e=$(t).parents(".menu_list_on"),i=e.siblings(".menu_list"),n=e.find(".menu").length,a=$("#cur");$(t).parent().remove(),i.find(".list li[data-href='"+$(t).parent().attr("data-href")+"']").removeClass("on"),n=e.find(".menu").length,a.html(n)}function imgKu(t){var e=$(t),i=e.parents(".jmp_pic_box").siblings(".jmp_ctrl_zone").find(".dele_img"),n=e.parent();e.hasClass("on")?(e.removeClass("on"),0==n.find("li.on").length&&i.removeClass("on")):(e.addClass("on"),i.addClass("on"))}!function(t,e,i,n){var a=i.layerPc={alert:function(t){var t=t||{};t.skin=t.skin||"layer-ext-jwb",t.title=t.title||"弹窗标题",t.content=t.content||"主体内容",t.area=t.area||["525px","400px"],t.call=t.call||"",t.btn=t.btn||["确定"],e.alert(t.content,{title:t.title,skin:t.skin,area:t.area,btn:t.btn},function(i){t.call&&t.call(),e.close(i)})},confirm:function(t){var t=t||{};return t.skin=t.skin||"layer-ext-jwb",t.title=t.title||"弹窗标题",t.content=t.content||"主体内容",t.area=t.area||["525px","400px"],t.call=t.call||"",t.callSec=t.callSec||"",t.btn=t.btn||["确定","取消"],t.isShut=t.isShut||!1,t.idx=null,t.idx=e.confirm(t.content,{title:t.title,skin:t.skin,area:t.area,btn:t.btn,btn2:function(i){t.callSec&&t.callSec(),e.close(i)}},function(i){t.call&&t.call(),!t.isShut&&e.close(i)}),t.idx},page:function(t){var t=t||{};t.type=1,t.skin=t.skin||"layer-ext-jwb",t.area=t.area||["525px","400px"],t.title=t.title||"页面层的标题",t.content=t.content||"页面层的内容",e.open(t)},frame:function(t){var t=t||{};return t.type=2,t.skin=t.skin||"layer-ext-jwb",t.area=t.area||["525px","400px"],t.title=t.title||"页面层的标题",t.url=t.url,t.success=t.success||"",t.call=t.call||"",t.not_shut=t.not_shut,t.isInnerParent=t.isInnerParent,t.frame_id=null,t.end=t.end||"",t.frame_id=e.open({type:t.type,skin:t.skin,area:t.area,title:t.title,content:t.url,success:function(e,i){a.define_frame(e,i,t,t.call)},end:function(){t.end&&t.end()}}),t.frame_id},define_frame:function(t,i,n,a){var n=n||{};n.frame_yes_btn=n.frame_yes_btn||"#frame_btn_yes",n.frame_no_btn=n.frame_no_btn||"#frame_btn_no";var s="layui-layer-iframe"+i,o=n.isInnerParent?getIframe(s,!0).win:parent.getIframe(s,!0).win,r=n.isInnerParent?getIframe(s,!0).doc:parent.getIframe(s,!0).doc,l=r.find(n.frame_no_btn);l.click(function(){n.isInnerParent?e.closeAll():parent.layer.closeAll()});var h=r.find(n.frame_yes_btn);h.click(function(){a&&a(o,r),n.not_shut||(n.isInnerParent?e.closeAll():parent.layer.closeAll())})},success:function(t){var t=t||{},i=t.tip_ok_con?t.tip_ok_con:"操作成功",n=t.tip_type?t.tip_type:0;switch(n){case 0:n="icon_suc";break;case 1:n="icon_warn";break;case 2:n="icon_failed"}var a="<div class='success_infor'><i class="+n+"></i><p class='suc_txt'>"+i+"</p></div>";t.type=1,t.skin=t.skin||"layer-ext-jwb",t.area=t.area||["386px","252px"],t.time=t.time||2e3,t.title=t.title||"提示",t.content=a,t.call=t.call||"",e.open({type:t.type,skin:t.skin,area:t.area,time:t.time,title:t.title,content:t.content,end:function(){t.call&&t.call()}})},ask:function(t){var t=t||{};t.skin=t.skin||"layer-ext-jwb_ask",t.title=t.title||"提示";var i=t.tip_ask_con?t.tip_ask_con:"确定要删除吗？",n="<div class='ask_infor'>"+i+"</div>";t.area=t.area||["386px","252px"],t.call=t.call||"",t.btn=t.btn||["确定","取消"],t.content=n,t.not_shut=t.not_shut,e.confirm(t.content,{title:t.title,skin:t.skin,area:t.area,btn:t.btn},function(i){t.call&&t.call(i),t.not_shut||e.close(i)})}}}(jQuery,layer,window,document),function(t,e,i){var n=e.NavCtrl=function(e){var i={header:"header_top",rightZone:"right_zone",hisTab:"his_tab_list_box",navFolder:"down_zone",navHead:"head_photo",nav:"navbar",navBtn:"up_zone",listFolder:"wrap",listEle:"item",listEleTit:"nav1",showHideEle:"item-list"};this.config=t.extend({},i,e),this.init(),this.bindEventItemHover(),this.bindClick(),this.bindWinResize()};n.prototype.init=function(){this.header=t("."+this.config.header),this.rightZone=t("."+this.config.rightZone),this.hisTab=t("."+this.config.hisTab),this.navFolder=t("."+this.config.navFolder),this.navHead=t("."+this.config.navHead),this.nav=t("."+this.config.nav),this.navBtn=this.nav.find("."+this.config.navBtn),this.listFolder=this.nav.find("#"+this.config.listFolder),this.listEle=this.nav.find("."+this.config.listEle),this.listEleTit=this.nav.find("."+this.config.listEleTit),this.showHideEle=this.nav.find("."+this.config.showHideEle),this.navBoolen=!0,this.timer=null,this.navWidth=this.nav.outerWidth(),this.navWidthHide=74,window.iTabWid=this.hisTab.outerWidth(),this.winHei=getViewPortSize().height,this.headHei=this.header.outerHeight(),this.navBtnHei=this.navBtn.outerHeight(),this.navFolderMar=parseInt(this.navFolder.css("margin-top"),10),this.navHeadHei=this.navHead.outerHeight(),this.listFolderMar=parseInt(this.listFolder.css("margin-top"),10),this.initScroll()},n.prototype.setScrollHei=function(t){var e=t.winHei-t.headHei-t.navBtnHei-t.navFolderMar-t.navHeadHei-t.listFolderMar;t.listFolder.height(e)},n.prototype.initScroll=function(){var t=this;t.setScrollHei(t),this.listFolder.mCustomScrollbar({callbacks:{whileScrolling:function(){t.setEleTop()},onScroll:function(){t.setEleTop()}},advanced:{updateOnBrowserResize:!0}})},n.prototype.setEleTop=function(){var e=t("."+this.config.listEleTit+".on").parent();if(e.length>0){var i=e.offset().top-this.headHei,n=this.listEle.index(e),a=this.showHideEle.eq(n-1),s=a.outerHeight();i+this.headHei+s>this.winHei?a.css("top",i-(i+this.headHei+s-this.winHei)):a.css("top",i)}},n.prototype.animationHoverIn=function(e){var i=this;i.navBoolen&&(clearTimeout(i.timer),i.navBoolen=!1,i.showHideEle.eq(e).stop(!0,!0).show(300),this.showHideEle.eq(e).hover(function(){clearTimeout(i.timer),t(this).show()},function(){i.showHideHoverOut()}))},n.prototype.animationHoverOut=function(){var t=this;t.navBoolen||(t.navBoolen=!0,clearTimeout(t.timer),t.timer=setTimeout(function(){t.showHideEle.stop(!0,!0).hide(300),t.listEleTit.removeClass("on")},300))},n.prototype.showHideHoverOut=function(){var t=this;t.navBoolen=!0,t.listEleTit.removeClass("on"),t.showHideEle.hide(300)},n.prototype.bindEventItemHover=function(){var e=this;e.listEle.hover(function(){var i=e.listEle.index(t(this));e.listEle.eq(i);e.showHideEle.hide(300),e.listEleTit.removeClass("on"),e.listEleTit.eq(i).addClass("on"),0!=i&&(e.setEleTop(),e.animationHoverIn(i-1))},function(){var i=e.listEle.index(t(this));0==i?e.showHideHoverOut():e.animationHoverOut()})},n.prototype.bindClick=function(){var t=this;t.navBtn.children().click(function(){var e=t.nav.outerWidth(),i=t.navHead.children().eq(1),n=t.listEleTit.children();e==t.navWidth?(i.hide(),n.hide(),t.showHideEle.css({left:t.navWidthHide}),t.navFolder.css({width:t.navWidthHide}),t.nav.stop(!0,!0).animate({width:t.navWidthHide},300),t.rightZone.stop(!0,!0).animate({"margin-left":t.navWidthHide},300,function(){window.iTabWid=t.hisTab.outerWidth(),t.config.callHide&&t.config.callHide(window.iTabWid)})):e==t.navWidthHide&&(i.show(),n.show(),t.showHideEle.css({left:t.navWidth}),t.navFolder.css({width:t.navWidth}),t.nav.stop(!0,!0).animate({width:t.navWidth},300),t.rightZone.stop(!0,!0).animate({"margin-left":t.navWidth},300,function(){window.iTabWid=t.hisTab.outerWidth(),t.config.callShow&&t.config.callShow(window.iTabWid)}))})},n.prototype.bindWinResize=function(){var e=this;t(window).resize(function(){e.winHei=getViewPortSize().height,e.setScrollHei(e)})}}(jQuery,window,document),function(t,e,i){var n=t.tabControl={};n.config=function(t){this.expires=t.expires,this.defaultHref=t.defaultHref,this.selectedClass=t.selectedClass,this.tabCookieName=t.tabCookieName,this.hrefCookieName=t.hrefCookieName,this.tabBlockElement=t.tabBlockElement,this.tabContainer=i("#"+t.tabContainer),this.frameContainer=i("#"+t.frameContainer),this.tabSinWid=this.tabContainer.find("li").eq(0).outerWidth(),this.containerWid=window.iTabWid,this.animateTime=this.animateTime||300,this.prevBtn=i("."+t.prevBtn),this.nextBtn=i("."+t.nextBtn),this.setPosBtn=i("#"+t.setPosBtn),this.closeAll=i("#"+t.closeAll),this.closeOther=i("#"+t.closeOther)},n.initTab=function(){var t=this.getTab();if(t&&t.length)for(var e in t)this.appendTab(t[e]);var i=this.getCookie(this.hrefCookieName)||this.defaultHref;this.setTab(i),this.setPosition(),this.goNext(),this.goPrev(),this.setPositionCur(),this.closeAllTab(),this.closeOtherTab()},n.canPrvePage=function(t){var e=t.offset().left,n=i(".up_zone").width(),a=i(".go_prev").width();e-30<=n+a&&!t.next().length&&this.prevBtn.click()},n.canNextPage=function(){var t=i("#his_tab_list li."+this.selectedClass).offset().left,e=i(".up_zone").width(),n=i(".go_prev").width(),a=i(".his_tab_list_box").width();e+n+a-30<t&&this.nextBtn.click()},n.addTab=function(t){if(this.currentSelect(t),this.checkTab(t))return void this.setPosBtn.click();this.appendTab(t),this.saveTab(t);var e=i(".his_tab_list").children("li"),n=i(".his_tab_list_box").width()/114,a=i(".his_tab_list_box").width(),s=parseInt(e.length/n);return this.animateTab(i(".his_tab_list"),-s*a,this.time),void this.currentSelect(t)},n.currentSelect=function(t){var e=t.href,i=!!t.fresh&&t.fresh;this.setTab(e,i,t)},n.getTabTpl=function(t){var e="";return t.href!=this.defaultHref&&(e='<li id="tab{id_href}" data-href="{href}" onclick="tabControl.currentSelect({name:\'{name}\', href:\'{href}\'});" >',e+="<span>",e+='<a href="javascript:;">{name}</a>',e+='<i class="shut_his" onclick="tabControl.deleteTab(event, \'{href}\');" ></i>',e+="</span>",e+="</li>",e=e.replace(/{href}/g,t.href),e=e.replace(/{name}/g,t.name),e=e.replace(/{id_href}/g,this.handleHref(t.href))),e},n.getFrameTpl=function(t){var e="";return t.href!=this.defaultHref&&(e='<iframe id="frame{id_href}" src="{href}" frameborder="0" width="100%" height="100%"></iframe>',e=e.replace(/{href}/g,t.href),e=e.replace(/{id_href}/g,this.handleHref(t.href))),e},n.appendTab=function(t){this.tabContainer.append(this.getTabTpl(t)),this.frameContainer.append(this.getFrameTpl(t))},n.checkTab=function(t){var e=!1,i=t.href,n=this.getTab();for(var a in n)if(n[a].href==i){e=!0;break}return e},n.saveTab=function(t){var e=this.getTab();e.push({name:t.name,href:t.href}),this.setCookie(this.tabCookieName,JSON.stringify(e),this.expires)},n.getTab=function(){var t=this.getCookie(this.tabCookieName);return null==t?[]:JSON.parse(t)},n.setTab=function(t,e){var n=this.handleHref(t);this.tabContainer.find(this.tabBlockElement).removeClass(this.selectedClass),i("#tab"+n).addClass(this.selectedClass),this.frameContainer.find("iframe").hide(),i("#frame"+n).show(),e&&i("#frame"+n).attr("src",t),this.setCookie(this.hrefCookieName,t)},n.handleHref=function(t){return t==this.defaultHref?(t=t.replace(/(http|https):/g,""),t=t.replace(/(\/\/|\/|\.|:)/g,"_")):t=i.md5(t),t},n.deleteTab=function(t,e){var n=this.handleHref(e),a=this.getTab();for(var s in a)if(a[s].href==e){var o=parseInt(s,10);a=a.slice(0,o).concat(a.slice(o+1)),this.setCookie(this.tabCookieName,JSON.stringify(a),this.expires);break}var r=i("#tab"+n),l=i("#frame"+n);this.canPrvePage(r),r.hasClass(this.selectedClass)&&this.setTab(r.prev().attr("data-href")),r.remove(),l.remove();var h=t||window.event;h.stopPropagation?h.stopPropagation():h.cancelBubble=!0},n.deletePointTab=function(t){var e=this.handleHref(t),n=this.getTab();for(var a in n)if(n[a].href==t){var s=parseInt(a,10);n=n.slice(0,s).concat(n.slice(s+1)),this.setCookie(this.tabCookieName,JSON.stringify(n),this.expires);break}var o=i("#tab"+e),r=i("#frame"+e);this.canPrvePage(o),o.remove(),r.remove()},n.setCookie=function(t,i,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),e.cookie=t+"="+decodeURI(i)+";expires="+a.toGMTString()+";path=/"},n.getCookie=function(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=e&&e.length>=2?decodeURIComponent(e[2]):null},n.setPosition=function(){var t=this.tabContainer.find("li"),e=this.tabContainer.find("li."+this.selectedClass),i=t.index(e),n=(i+1)*this.tabSinWid-this.containerWid;n>0&&this.tabContainer.css({"margin-left":-n})},n.setPositionAni=function(){var t=this.tabContainer.find("li"),e=this.tabContainer.find("li."+this.selectedClass),i=t.index(e),a=(i+1)*this.tabSinWid-this.containerWid,s=parseInt(this.tabContainer.css("margin-left"),10);a>0?n.animateTab(this.tabContainer,-a,this.animateTime):a<0&&s<0&&n.animateTab(this.tabContainer,0,this.animateTime)},n.animateTab=function(t,e,i){t.animate({"margin-left":e},i)},n.goNext=function(){var t=this;t.nextBtn.click(function(){var e=t.tabContainer.find("li"),i=e.length,n=t.tabSinWid*i,a=parseInt(t.tabContainer.css("margin-left"),10),s=Math.floor(n/(t.containerWid-a)),o=n-t.containerWid+a;o>0&&0==s?t.animateTab(t.tabContainer,-o,t.animateTime):o>0&&s>0&&t.animateTab(t.tabContainer,-t.containerWid+a,t.animateTime)})},n.goPrev=function(){var t=this;t.prevBtn.click(function(){var e=parseInt(t.tabContainer.css("margin-left"),10),i=-parseInt(t.tabContainer.css("margin-left"),10),n=Math.floor(i/t.containerWid);e<0&&0==n?t.animateTab(t.tabContainer,0,t.animateTime):e<0&&n>0&&t.animateTab(t.tabContainer,e+t.containerWid,t.animateTime)})},n.setPositionCur=function(){var t=this;t.setPosBtn.click(function(){t.setPositionAni()})},n.closeAllTab=function(){var t=this;t.closeAll.click(function(){var e=t.tabContainer.find("i.shut_his");e=i.makeArray(e);for(var n=0;n<e.length;n++)e[n].click();t.setPositionAni()})},n.closeOtherTab=function(){var t=this;t.closeOther.click(function(){var e=t.tabContainer.find("li[class != 'on'] i.shut_his"),n=t.tabContainer.find("li.on");e=i.makeArray(e);for(var a=0;a<e.length;a++)e[a].click();n.get(0).click(),t.setPositionAni()})},n.closeCurTab=function(){var t=this,e=t.tabContainer.find("li.on i.shut_his");e&&e.get(0).click()},n.reloadCurFrame=function(t){var e=i("#"+t)[0].contentWindow;e.location.reload()},n.refreshCurTab=function(t){for(var e=window.frames,i=null,n=0;n<e.length;n++)if(e[n].frameElement.src==t){i=n;break}i&&e[i].location.reload()}}(window,document,jQuery);