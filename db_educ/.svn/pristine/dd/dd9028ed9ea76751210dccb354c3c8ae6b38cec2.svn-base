<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.db.service.UserRoleService">
	<resultMap type="com.db.entity.UserRole" id="UserRoleMap">
		<result column="user_id" property="userId" jdbcType="INTEGER" />
		<result column="role_id" property="roleId" jdbcType="VARCHAR" />
      <collection property="rlList" resultMap="RoleMap"></collection>
	</resultMap>
 <resultMap type="com.db.entity.Role" id="RoleMap">
		<result column="role_id" property="roleId" jdbcType="INTEGER" />
		<result column="role_name" property="roleName" jdbcType="VARCHAR" />
		<result column="role_describe" property="roleDescribe"
			jdbcType="VARCHAR" />
		<result column="is_modify" property="isModify" jdbcType="INTEGER" />
		<result column="create_time" property="createTime" />
		<result column="menu_ids" property="menuIds" jdbcType="VARCHAR" />
          	
          		
	</resultMap>

<select id="getUserRole" resultMap="UserRoleMap">
   select * from td_user_role where user_id=#{userId}
</select>
<insert id="saveUserRole" parameterType="com.db.entity.UserRole">

    insert into td_user_role (user_id,role_id)
         values(#{userId},#{roleId})
</insert>

<update id="updateUserRole" parameterType="com.db.entity.UserRole">
    update td_user_role set role_id=#{roleId}
       where user_id=#{userId}

</update>
<delete id="deleteUserRoleById" parameterType="int">
   delete from td_user_role  where user_id=#{userId} 
</delete>
<select id="getRoleById" resultMap="UserRoleMap">
         select * from td_user_role where role_id=#{roleId}
</select>
</mapper>