<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.db.service.PaperRecordService">
	<resultMap type="com.db.entity.PaperRecord" id="RecordMap">
		<result column="exam_record_id" property="recordId" jdbcType="INTEGER" />
		<result column="course_id" property="courseId" jdbcType="INTEGER"/>
		<result column="paper_id" property="paperId" jdbcType="VARCHAR" />
		<result column="class_id" property="classId" jdbcType="VARCHAR" />
		<result column="room_id" property="roomId" jdbcType="INTEGER"/>
		<result column="teacher_id" property="teacherId" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" jdbcType="VARCHAR" />
		<result column="update_time" property="updateTime" jdbcType="VARCHAR" />
	</resultMap>
	
	<insert id="addPaperRecord" parameterType="com.db.entity.PaperRecord"
		useGeneratedKeys="true" keyProperty="recordId">
		insert into tb_paper_record(paper_id,teacher_id,create_time
		<if test="courseId!=null and courseId!=''">
			<![CDATA[,course_id]]>
		</if>
		<if test="classId!=null and classId!=''">
			<![CDATA[,class_id]]>
		</if>
		<if test="roomId!=null and roomId!=''">
			<![CDATA[,room_id]]>
		</if>
		<if test="status!=null and status!=''">
			<![CDATA[,status]]>
		</if>
		) values(#{paperId},#{teacherId},#{createTime}
		<if test="courseId!=null and courseId!=''">
			<![CDATA[,#{courseId}]]>
		</if>
		<if test="classId!=null and classId!=''">
			<![CDATA[,#{classId}]]>
		</if>
		<if test="roomId!=null and roomId!=''">
			<![CDATA[,#{roomId}]]>
		</if>
		<if test="status!=null and status!=''">
			<![CDATA[,#{status}]]>
		</if>
		);
	</insert>
	
	<select id="getPaperRecordById" parameterType="Integer" resultMap="RecordMap">
		select * from tb_paper_record where exam_record_id=#{recordId};
	</select>
	
	<update id="updatePaperRecord" parameterType="com.db.entity.PaperRecord">
		update tb_paper_record set update_time=#{updateTime},status=#{status} where exam_record_id=#{recordId};
	</update>

</mapper>